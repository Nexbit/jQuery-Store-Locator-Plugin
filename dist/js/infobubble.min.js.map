{"version":3,"sources":["infobubble.js"],"names":["InfoBubble","opt_options","this","extend","google","maps","OverlayView","tabs_","activeTab_","baseZIndex_","isOpen_","options","undefined","BACKGROUND_COLOR_","BORDER_COLOR_","BORDER_RADIUS_","BORDER_WIDTH_","PADDING_","ARROW_POSITION_","MIN_WIDTH_","SHADOW_STYLE_","ARROW_SIZE_","ARROW_STYLE_","buildDom_","setValues","window","prototype","obj1","obj2","object","property","apply","bubble","bubble_","document","createElement","style","tabsContainer_","close","close_","px","src","that","event","addDomListener","trigger","contentContainer","contentContainer_","content","content_","appendChild","arrow","arrow_","arrowOuter","arrowOuter_","arrowInner","arrowInner_","arrowSize","getArrowSize_","bubbleShadow","bubbleShadow_","stylesheet","setAttribute","animationName_","Math","round","random","css","textContent","getElementsByTagName","setBackgroundClassName","className","set","backgroundClassName_changed","get","setTabClassName","tabClassName_changed","updateTabStyles_","getArrowStyle_","parseInt","setArrowStyle","arrowStyle_changed","arrowSize_changed","setArrowSize","size","borderWidth_changed","setArrowPosition","pos","getArrowPosition_","arrowPosition_changed","redraw_","setZIndex","zIndex","getZIndex","zIndex_changed","setShadowStyle","shadowStyle","getShadowStyle_","shadowStyle_changed","display","shadow","backgroundColor","draw","showCloseButton","hideCloseButton","hideCloseButton_changed","setBackgroundColor","color","backgroundColor_changed","setBorderColor","borderColor_changed","borderColor","setBorderRadius","radius","getBorderRadius_","borderRadius_changed","borderRadius","borderWidth","getBorderWidth_","setBorderWidth","width","updateArrowStyle_","arrowStyle","arrowOuterSizePx","arrowInnerSizePx","max","outer","inner","setPadding","padding","getPadding_","padding_changed","num","addEvents_","events","listeners_","i","push","e","cancelBubble","stopPropagation","onAdd","panes","getPanes","floatPane","floatShadow","projection","getProjection","latLng","tabHeight","offsetHeight","anchorHeight","getAnchorHeight_","arrowPosition","fromLatLngToDivPixel","offsetWidth","height","top","y","left","x","onRemove","parentNode","removeChild","listener","removeListener","isOpen","replace","open","opt_map","opt_anchor","setTimeout","open_","updateContent_","setMap","bindTo","panToView","setPosition","position","getPosition","position_changed","map","mapHeight","getDiv","centerPos","fromLatLngToContainerPixel","getCenter","spaceTop","spaceBottom","deltaY","fromContainerPixelToLatLng","panTo","htmlToDocumentFragment_","htmlString","tempDiv","innerHTML","childNodes","length","firstChild","fragment","createDocumentFragment","removeChildren_","node","child","setContent","getContent","image","images","imageLoaded_","pan","index","tab","setTabStyle_","marginRight","borderRadiusPx","styles","cssFloat","cursor","border","whiteSpace","borderRadiusTopLeft","MozBorderRadiusTopleft","webkitBorderTopLeftRadius","borderRadiusTopRight","MozBorderRadiusTopright","webkitBorderTopRightRadius","addTabActions_","listener_","setTabActive_","setTabActive","activeTab","setMaxWidth","maxWidth_changed","setMaxHeight","maxHeight_changed","setMinWidth","minWidth_changed","setMinHeight","minHeight_changed","addTab","label","updateTab","opt_label","opt_content","removeTab","splice","t","getElementSize_","element","opt_maxWidth","opt_maxHeight","sizer","cloneNode","body","Size","figureOutSize_","positionCloseButton_","mapDiv","gutter","mapWidth","maxWidth","maxHeight","min","tabWidth","tabSize","contentSize","tabHeight_","anchorPoint","anchorPoint_changed","bw","right","c","clientHeight","scrollHeight"],"mappings":"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","sourceRoot":"source-maps","sourcesContent":["// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @externs_url http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/maps/google_maps_api_v3.js\n// ==/ClosureCompiler==\n\n/**\n * @name CSS3 InfoBubble with tabs for Google Maps API V3\n * @version 0.8\n * @author Luke Mahe\n * @license Apache 2.0\n * @fileoverview\n * This library is a CSS Infobubble with tabs. It uses css3 rounded corners and\n * drop shadows and animations. It also allows tabs\n */\n\n/*\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * A CSS3 InfoBubble v0.8\n * @param {Object.<string, *>=} opt_options Optional properties to set.\n * @extends {google.maps.OverlayView}\n * @constructor\n */\nfunction InfoBubble(opt_options) {\n  this.extend(InfoBubble, google.maps.OverlayView);\n  this.tabs_ = [];\n  this.activeTab_ = null;\n  this.baseZIndex_ = 100;\n  this.isOpen_ = false;\n\n  var options = opt_options || {};\n\n  if (options['backgroundColor'] == undefined) {\n    options['backgroundColor'] = this.BACKGROUND_COLOR_;\n  }\n\n  if (options['borderColor'] == undefined) {\n    options['borderColor'] = this.BORDER_COLOR_;\n  }\n\n  if (options['borderRadius'] == undefined) {\n    options['borderRadius'] = this.BORDER_RADIUS_;\n  }\n\n  if (options['borderWidth'] == undefined) {\n    options['borderWidth'] = this.BORDER_WIDTH_;\n  }\n\n  if (options['padding'] == undefined) {\n    options['padding'] = this.PADDING_;\n  }\n\n  if (options['arrowPosition'] == undefined) {\n    options['arrowPosition'] = this.ARROW_POSITION_;\n  }\n\n  if (options['disableAutoPan'] == undefined) {\n    options['disableAutoPan'] = false;\n  }\n\n  if (options['disableAnimation'] == undefined) {\n    options['disableAnimation'] = false;\n  }\n\n  if (options['minWidth'] == undefined) {\n    options['minWidth'] = this.MIN_WIDTH_;\n  }\n\n  if (options['shadowStyle'] == undefined) {\n    options['shadowStyle'] = this.SHADOW_STYLE_;\n  }\n\n  if (options['arrowSize'] == undefined) {\n    options['arrowSize'] = this.ARROW_SIZE_;\n  }\n\n  if (options['arrowStyle'] == undefined) {\n    options['arrowStyle'] = this.ARROW_STYLE_;\n  }\n\n  this.buildDom_();\n\n  this.setValues(options);\n}\nwindow['InfoBubble'] = InfoBubble;\n\n\n/**\n * Default arrow size\n * @const\n * @private\n */\nInfoBubble.prototype.ARROW_SIZE_ = 15;\n\n\n/**\n * Default arrow style\n * @const\n * @private\n */\nInfoBubble.prototype.ARROW_STYLE_ = 0;\n\n\n/**\n * Default shadow style\n * @const\n * @private\n */\nInfoBubble.prototype.SHADOW_STYLE_ = 1;\n\n\n/**\n * Default min width\n * @const\n * @private\n */\nInfoBubble.prototype.MIN_WIDTH_ = 50;\n\n\n/**\n * Default arrow position\n * @const\n * @private\n */\nInfoBubble.prototype.ARROW_POSITION_ = 50;\n\n\n/**\n * Default padding\n * @const\n * @private\n */\nInfoBubble.prototype.PADDING_ = 10;\n\n\n/**\n * Default border width\n * @const\n * @private\n */\nInfoBubble.prototype.BORDER_WIDTH_ = 1;\n\n\n/**\n * Default border color\n * @const\n * @private\n */\nInfoBubble.prototype.BORDER_COLOR_ = '#ccc';\n\n\n/**\n * Default border radius\n * @const\n * @private\n */\nInfoBubble.prototype.BORDER_RADIUS_ = 10;\n\n\n/**\n * Default background color\n * @const\n * @private\n */\nInfoBubble.prototype.BACKGROUND_COLOR_ = '#fff';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nInfoBubble.prototype.extend = function(obj1, obj2) {\n  return (function(object) {\n    for (var property in object.prototype) {\n      this.prototype[property] = object.prototype[property];\n    }\n    return this;\n  }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Builds the InfoBubble dom\n * @private\n */\nInfoBubble.prototype.buildDom_ = function() {\n  var bubble = this.bubble_ = document.createElement('DIV');\n  bubble.style['position'] = 'absolute';\n  bubble.style['zIndex'] = this.baseZIndex_;\n\n  var tabsContainer = this.tabsContainer_ = document.createElement('DIV');\n  tabsContainer.style['position'] = 'relative';\n\n  // Close button\n  var close = this.close_ = document.createElement('IMG');\n  close.style['position'] = 'absolute';\n  close.style['width'] = this.px(12);\n  close.style['height'] = this.px(12);\n  close.style['border'] = 0;\n  close.style['zIndex'] = this.baseZIndex_ + 1;\n  close.style['cursor'] = 'pointer';\n  close.src = 'https://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif';\n\n  var that = this;\n  google.maps.event.addDomListener(close, 'click', function() {\n    that.close();\n    google.maps.event.trigger(that, 'closeclick');\n  });\n\n  // Content area\n  var contentContainer = this.contentContainer_ = document.createElement('DIV');\n  contentContainer.style['overflowX'] = 'auto';\n  contentContainer.style['overflowY'] = 'auto';\n  contentContainer.style['cursor'] = 'default';\n  contentContainer.style['clear'] = 'both';\n  contentContainer.style['position'] = 'relative';\n\n  var content = this.content_ = document.createElement('DIV');\n  contentContainer.appendChild(content);\n\n  // Arrow\n  var arrow = this.arrow_ = document.createElement('DIV');\n  arrow.style['position'] = 'relative';\n\n  var arrowOuter = this.arrowOuter_ = document.createElement('DIV');\n  var arrowInner = this.arrowInner_ = document.createElement('DIV');\n\n  var arrowSize = this.getArrowSize_();\n\n  arrowOuter.style['position'] = arrowInner.style['position'] = 'absolute';\n  arrowOuter.style['left'] = arrowInner.style['left'] = '50%';\n  arrowOuter.style['height'] = arrowInner.style['height'] = '0';\n  arrowOuter.style['width'] = arrowInner.style['width'] = '0';\n  arrowOuter.style['marginLeft'] = this.px(-arrowSize);\n  arrowOuter.style['borderWidth'] = this.px(arrowSize);\n  arrowOuter.style['borderBottomWidth'] = 0;\n\n  // Shadow\n  var bubbleShadow = this.bubbleShadow_ = document.createElement('DIV');\n  bubbleShadow.style['position'] = 'absolute';\n\n  // Hide the InfoBubble by default\n  bubble.style['display'] = bubbleShadow.style['display'] = 'none';\n\n  bubble.appendChild(this.tabsContainer_);\n  bubble.appendChild(close);\n  bubble.appendChild(contentContainer);\n  arrow.appendChild(arrowOuter);\n  arrow.appendChild(arrowInner);\n  bubble.appendChild(arrow);\n\n  var stylesheet = document.createElement('style');\n  stylesheet.setAttribute('type', 'text/css');\n\n  /**\n   * The animation for the infobubble\n   * @type {string}\n   */\n  this.animationName_ = '_ibani_' + Math.round(Math.random() * 10000);\n\n  var css = '.' + this.animationName_ + '{-webkit-animation-name:' +\n      this.animationName_ + ';-webkit-animation-duration:0.5s;' +\n      '-webkit-animation-iteration-count:1;}' +\n      '@-webkit-keyframes ' + this.animationName_ + ' {from {' +\n      '-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% ' +\n      '{-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}';\n\n  stylesheet.textContent = css;\n  document.getElementsByTagName('head')[0].appendChild(stylesheet);\n};\n\n\n/**\n * Sets the background class name\n *\n * @param {string} className The class name to set.\n */\nInfoBubble.prototype.setBackgroundClassName = function(className) {\n  this.set('backgroundClassName', className);\n};\nInfoBubble.prototype['setBackgroundClassName'] =\n    InfoBubble.prototype.setBackgroundClassName;\n\n\n/**\n * changed MVC callback\n */\nInfoBubble.prototype.backgroundClassName_changed = function() {\n  this.content_.className = this.get('backgroundClassName');\n};\nInfoBubble.prototype['backgroundClassName_changed'] =\n    InfoBubble.prototype.backgroundClassName_changed;\n\n\n/**\n * Sets the class of the tab\n *\n * @param {string} className the class name to set.\n */\nInfoBubble.prototype.setTabClassName = function(className) {\n  this.set('tabClassName', className);\n};\nInfoBubble.prototype['setTabClassName'] =\n    InfoBubble.prototype.setTabClassName;\n\n\n/**\n * tabClassName changed MVC callback\n */\nInfoBubble.prototype.tabClassName_changed = function() {\n  this.updateTabStyles_();\n};\nInfoBubble.prototype['tabClassName_changed'] =\n    InfoBubble.prototype.tabClassName_changed;\n\n\n/**\n * Gets the style of the arrow\n *\n * @private\n * @return {number} The style of the arrow.\n */\nInfoBubble.prototype.getArrowStyle_ = function() {\n  return parseInt(this.get('arrowStyle'), 10) || 0;\n};\n\n\n/**\n * Sets the style of the arrow\n *\n * @param {number} style The style of the arrow.\n */\nInfoBubble.prototype.setArrowStyle = function(style) {\n  this.set('arrowStyle', style);\n};\nInfoBubble.prototype['setArrowStyle'] =\n    InfoBubble.prototype.setArrowStyle;\n\n\n/**\n * Arrow style changed MVC callback\n */\nInfoBubble.prototype.arrowStyle_changed = function() {\n  this.arrowSize_changed();\n};\nInfoBubble.prototype['arrowStyle_changed'] =\n    InfoBubble.prototype.arrowStyle_changed;\n\n\n/**\n * Gets the size of the arrow\n *\n * @private\n * @return {number} The size of the arrow.\n */\nInfoBubble.prototype.getArrowSize_ = function() {\n  return parseInt(this.get('arrowSize'), 10) || 0;\n};\n\n\n/**\n * Sets the size of the arrow\n *\n * @param {number} size The size of the arrow.\n */\nInfoBubble.prototype.setArrowSize = function(size) {\n  this.set('arrowSize', size);\n};\nInfoBubble.prototype['setArrowSize'] =\n    InfoBubble.prototype.setArrowSize;\n\n\n/**\n * Arrow size changed MVC callback\n */\nInfoBubble.prototype.arrowSize_changed = function() {\n  this.borderWidth_changed();\n};\nInfoBubble.prototype['arrowSize_changed'] =\n    InfoBubble.prototype.arrowSize_changed;\n\n\n/**\n * Set the position of the InfoBubble arrow\n *\n * @param {number} pos The position to set.\n */\nInfoBubble.prototype.setArrowPosition = function(pos) {\n  this.set('arrowPosition', pos);\n};\nInfoBubble.prototype['setArrowPosition'] =\n    InfoBubble.prototype.setArrowPosition;\n\n\n/**\n * Get the position of the InfoBubble arrow\n *\n * @private\n * @return {number} The position..\n */\nInfoBubble.prototype.getArrowPosition_ = function() {\n  return parseInt(this.get('arrowPosition'), 10) || 0;\n};\n\n\n/**\n * arrowPosition changed MVC callback\n */\nInfoBubble.prototype.arrowPosition_changed = function() {\n  var pos = this.getArrowPosition_();\n  this.arrowOuter_.style['left'] = this.arrowInner_.style['left'] = pos + '%';\n\n  this.redraw_();\n};\nInfoBubble.prototype['arrowPosition_changed'] =\n    InfoBubble.prototype.arrowPosition_changed;\n\n\n/**\n * Set the zIndex of the InfoBubble\n *\n * @param {number} zIndex The zIndex to set.\n */\nInfoBubble.prototype.setZIndex = function(zIndex) {\n  this.set('zIndex', zIndex);\n};\nInfoBubble.prototype['setZIndex'] = InfoBubble.prototype.setZIndex;\n\n\n/**\n * Get the zIndex of the InfoBubble\n *\n * @return {number} The zIndex to set.\n */\nInfoBubble.prototype.getZIndex = function() {\n  return parseInt(this.get('zIndex'), 10) || this.baseZIndex_;\n};\n\n\n/**\n * zIndex changed MVC callback\n */\nInfoBubble.prototype.zIndex_changed = function() {\n  var zIndex = this.getZIndex();\n\n  this.bubble_.style['zIndex'] = this.baseZIndex_ = zIndex;\n  this.close_.style['zIndex'] = zIndex + 1;\n};\nInfoBubble.prototype['zIndex_changed'] = InfoBubble.prototype.zIndex_changed;\n\n\n/**\n * Set the style of the shadow\n *\n * @param {number} shadowStyle The style of the shadow.\n */\nInfoBubble.prototype.setShadowStyle = function(shadowStyle) {\n  this.set('shadowStyle', shadowStyle);\n};\nInfoBubble.prototype['setShadowStyle'] = InfoBubble.prototype.setShadowStyle;\n\n\n/**\n * Get the style of the shadow\n *\n * @private\n * @return {number} The style of the shadow.\n */\nInfoBubble.prototype.getShadowStyle_ = function() {\n  return parseInt(this.get('shadowStyle'), 10) || 0;\n};\n\n\n/**\n * shadowStyle changed MVC callback\n */\nInfoBubble.prototype.shadowStyle_changed = function() {\n  var shadowStyle = this.getShadowStyle_();\n\n  var display = '';\n  var shadow = '';\n  var backgroundColor = '';\n  switch (shadowStyle) {\n    case 0:\n      display = 'none';\n      break;\n    case 1:\n      shadow = '40px 15px 10px rgba(33,33,33,0.3)';\n      backgroundColor = 'transparent';\n      break;\n    case 2:\n      shadow = '0 0 2px rgba(33,33,33,0.3)';\n      backgroundColor = 'rgba(33,33,33,0.35)';\n      break;\n  }\n  this.bubbleShadow_.style['boxShadow'] =\n      this.bubbleShadow_.style['webkitBoxShadow'] =\n      this.bubbleShadow_.style['MozBoxShadow'] = shadow;\n  this.bubbleShadow_.style['backgroundColor'] = backgroundColor;\n  if (this.isOpen_) {\n    this.bubbleShadow_.style['display'] = display;\n    this.draw();\n  }\n};\nInfoBubble.prototype['shadowStyle_changed'] =\n    InfoBubble.prototype.shadowStyle_changed;\n\n\n/**\n * Show the close button\n */\nInfoBubble.prototype.showCloseButton = function() {\n  this.set('hideCloseButton', false);\n};\nInfoBubble.prototype['showCloseButton'] = InfoBubble.prototype.showCloseButton;\n\n\n/**\n * Hide the close button\n */\nInfoBubble.prototype.hideCloseButton = function() {\n  this.set('hideCloseButton', true);\n};\nInfoBubble.prototype['hideCloseButton'] = InfoBubble.prototype.hideCloseButton;\n\n\n/**\n * hideCloseButton changed MVC callback\n */\nInfoBubble.prototype.hideCloseButton_changed = function() {\n  this.close_.style['display'] = this.get('hideCloseButton') ? 'none' : '';\n};\nInfoBubble.prototype['hideCloseButton_changed'] =\n    InfoBubble.prototype.hideCloseButton_changed;\n\n\n/**\n * Set the background color\n *\n * @param {string} color The color to set.\n */\nInfoBubble.prototype.setBackgroundColor = function(color) {\n  if (color) {\n    this.set('backgroundColor', color);\n  }\n};\nInfoBubble.prototype['setBackgroundColor'] =\n    InfoBubble.prototype.setBackgroundColor;\n\n\n/**\n * backgroundColor changed MVC callback\n */\nInfoBubble.prototype.backgroundColor_changed = function() {\n  var backgroundColor = this.get('backgroundColor');\n  this.contentContainer_.style['backgroundColor'] = backgroundColor;\n\n  this.arrowInner_.style['borderColor'] = backgroundColor +\n      ' transparent transparent';\n  this.updateTabStyles_();\n};\nInfoBubble.prototype['backgroundColor_changed'] =\n    InfoBubble.prototype.backgroundColor_changed;\n\n\n/**\n * Set the border color\n *\n * @param {string} color The border color.\n */\nInfoBubble.prototype.setBorderColor = function(color) {\n  if (color) {\n    this.set('borderColor', color);\n  }\n};\nInfoBubble.prototype['setBorderColor'] = InfoBubble.prototype.setBorderColor;\n\n\n/**\n * borderColor changed MVC callback\n */\nInfoBubble.prototype.borderColor_changed = function() {\n  var borderColor = this.get('borderColor');\n\n  var contentContainer = this.contentContainer_;\n  var arrowOuter = this.arrowOuter_;\n  contentContainer.style['borderColor'] = borderColor;\n\n  arrowOuter.style['borderColor'] = borderColor +\n      ' transparent transparent';\n\n  contentContainer.style['borderStyle'] =\n      arrowOuter.style['borderStyle'] =\n      this.arrowInner_.style['borderStyle'] = 'solid';\n\n  this.updateTabStyles_();\n};\nInfoBubble.prototype['borderColor_changed'] =\n    InfoBubble.prototype.borderColor_changed;\n\n\n/**\n * Set the radius of the border\n *\n * @param {number} radius The radius of the border.\n */\nInfoBubble.prototype.setBorderRadius = function(radius) {\n  this.set('borderRadius', radius);\n};\nInfoBubble.prototype['setBorderRadius'] = InfoBubble.prototype.setBorderRadius;\n\n\n/**\n * Get the radius of the border\n *\n * @private\n * @return {number} The radius of the border.\n */\nInfoBubble.prototype.getBorderRadius_ = function() {\n  return parseInt(this.get('borderRadius'), 10) || 0;\n};\n\n\n/**\n * borderRadius changed MVC callback\n */\nInfoBubble.prototype.borderRadius_changed = function() {\n  var borderRadius = this.getBorderRadius_();\n  var borderWidth = this.getBorderWidth_();\n\n  this.contentContainer_.style['borderRadius'] =\n      this.contentContainer_.style['MozBorderRadius'] =\n      this.contentContainer_.style['webkitBorderRadius'] =\n      this.bubbleShadow_.style['borderRadius'] =\n      this.bubbleShadow_.style['MozBorderRadius'] =\n      this.bubbleShadow_.style['webkitBorderRadius'] = this.px(borderRadius);\n\n  this.tabsContainer_.style['paddingLeft'] =\n      this.tabsContainer_.style['paddingRight'] =\n      this.px(borderRadius + borderWidth);\n\n  this.redraw_();\n};\nInfoBubble.prototype['borderRadius_changed'] =\n    InfoBubble.prototype.borderRadius_changed;\n\n\n/**\n * Get the width of the border\n *\n * @private\n * @return {number} width The width of the border.\n */\nInfoBubble.prototype.getBorderWidth_ = function() {\n  return parseInt(this.get('borderWidth'), 10) || 0;\n};\n\n\n/**\n * Set the width of the border\n *\n * @param {number} width The width of the border.\n */\nInfoBubble.prototype.setBorderWidth = function(width) {\n  this.set('borderWidth', width);\n};\nInfoBubble.prototype['setBorderWidth'] = InfoBubble.prototype.setBorderWidth;\n\n\n/**\n * borderWidth change MVC callback\n */\nInfoBubble.prototype.borderWidth_changed = function() {\n  var borderWidth = this.getBorderWidth_();\n\n  this.contentContainer_.style['borderWidth'] = this.px(borderWidth);\n  this.tabsContainer_.style['top'] = this.px(borderWidth);\n\n  this.updateArrowStyle_();\n  this.updateTabStyles_();\n  this.borderRadius_changed();\n  this.redraw_();\n};\nInfoBubble.prototype['borderWidth_changed'] =\n    InfoBubble.prototype.borderWidth_changed;\n\n\n/**\n * Update the arrow style\n * @private\n */\nInfoBubble.prototype.updateArrowStyle_ = function() {\n  var borderWidth = this.getBorderWidth_();\n  var arrowSize = this.getArrowSize_();\n  var arrowStyle = this.getArrowStyle_();\n  var arrowOuterSizePx = this.px(arrowSize);\n  var arrowInnerSizePx = this.px(Math.max(0, arrowSize - borderWidth));\n\n  var outer = this.arrowOuter_;\n  var inner = this.arrowInner_;\n\n  this.arrow_.style['marginTop'] = this.px(-borderWidth);\n  outer.style['borderTopWidth'] = arrowOuterSizePx;\n  inner.style['borderTopWidth'] = arrowInnerSizePx;\n\n  // Full arrow or arrow pointing to the left\n  if (arrowStyle == 0 || arrowStyle == 1) {\n    outer.style['borderLeftWidth'] = arrowOuterSizePx;\n    inner.style['borderLeftWidth'] = arrowInnerSizePx;\n  } else {\n    outer.style['borderLeftWidth'] = inner.style['borderLeftWidth'] = 0;\n  }\n\n  // Full arrow or arrow pointing to the right\n  if (arrowStyle == 0 || arrowStyle == 2) {\n    outer.style['borderRightWidth'] = arrowOuterSizePx;\n    inner.style['borderRightWidth'] = arrowInnerSizePx;\n  } else {\n    outer.style['borderRightWidth'] = inner.style['borderRightWidth'] = 0;\n  }\n\n  if (arrowStyle < 2) {\n    outer.style['marginLeft'] = this.px(-(arrowSize));\n    inner.style['marginLeft'] = this.px(-(arrowSize - borderWidth));\n  } else {\n    outer.style['marginLeft'] = inner.style['marginLeft'] = 0;\n  }\n\n  // If there is no border then don't show thw outer arrow\n  if (borderWidth == 0) {\n    outer.style['display'] = 'none';\n  } else {\n    outer.style['display'] = '';\n  }\n};\n\n\n/**\n * Set the padding of the InfoBubble\n *\n * @param {number} padding The padding to apply.\n */\nInfoBubble.prototype.setPadding = function(padding) {\n  this.set('padding', padding);\n};\nInfoBubble.prototype['setPadding'] = InfoBubble.prototype.setPadding;\n\n\n/**\n * Set the padding of the InfoBubble\n *\n * @private\n * @return {number} padding The padding to apply.\n */\nInfoBubble.prototype.getPadding_ = function() {\n  return parseInt(this.get('padding'), 10) || 0;\n};\n\n\n/**\n * padding changed MVC callback\n */\nInfoBubble.prototype.padding_changed = function() {\n  var padding = this.getPadding_();\n  this.contentContainer_.style['padding'] = this.px(padding);\n  this.updateTabStyles_();\n\n  this.redraw_();\n};\nInfoBubble.prototype['padding_changed'] = InfoBubble.prototype.padding_changed;\n\n\n/**\n * Add px extention to the number\n *\n * @param {number} num The number to wrap.\n * @return {string|number} A wrapped number.\n */\nInfoBubble.prototype.px = function(num) {\n  if (num) {\n    // 0 doesn't need to be wrapped\n    return num + 'px';\n  }\n  return num;\n};\n\n\n/**\n * Add events to stop propagation\n * @private\n */\nInfoBubble.prototype.addEvents_ = function() {\n  // We want to cancel all the events so they do not go to the map\n  var events = ['mousedown', 'mousemove', 'mouseover', 'mouseout', 'mouseup',\n      'mousewheel', 'DOMMouseScroll', 'touchstart', 'touchend', 'touchmove',\n      'dblclick', 'contextmenu', 'click'];\n\n  var bubble = this.bubble_;\n  this.listeners_ = [];\n  for (var i = 0, event; event = events[i]; i++) {\n    this.listeners_.push(\n      google.maps.event.addDomListener(bubble, event, function(e) {\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      })\n    );\n  }\n};\n\n\n/**\n * On Adding the InfoBubble to a map\n * Implementing the OverlayView interface\n */\nInfoBubble.prototype.onAdd = function() {\n  if (!this.bubble_) {\n    this.buildDom_();\n  }\n\n  this.addEvents_();\n\n  var panes = this.getPanes();\n  if (panes) {\n    panes.floatPane.appendChild(this.bubble_);\n    panes.floatShadow.appendChild(this.bubbleShadow_);\n  }\n};\nInfoBubble.prototype['onAdd'] = InfoBubble.prototype.onAdd;\n\n\n/**\n * Draw the InfoBubble\n * Implementing the OverlayView interface\n */\nInfoBubble.prototype.draw = function() {\n  var projection = this.getProjection();\n\n  if (!projection) {\n    // The map projection is not ready yet so do nothing\n    return;\n  }\n\n  var latLng = /** @type {google.maps.LatLng} */ (this.get('position'));\n\n  if (!latLng) {\n    this.close();\n    return;\n  }\n\n  var tabHeight = 0;\n\n  if (this.activeTab_) {\n    tabHeight = this.activeTab_.offsetHeight;\n  }\n\n  var anchorHeight = this.getAnchorHeight_();\n  var arrowSize = this.getArrowSize_();\n  var arrowPosition = this.getArrowPosition_();\n\n  arrowPosition = arrowPosition / 100;\n\n  var pos = projection.fromLatLngToDivPixel(latLng);\n  var width = this.contentContainer_.offsetWidth;\n  var height = this.bubble_.offsetHeight;\n\n  if (!width) {\n    return;\n  }\n\n  // Adjust for the height of the info bubble\n  var top = pos.y - (height + arrowSize);\n\n  if (anchorHeight) {\n    // If there is an anchor then include the height\n    top -= anchorHeight;\n  }\n\n  var left = pos.x - (width * arrowPosition);\n\n  this.bubble_.style['top'] = this.px(top);\n  this.bubble_.style['left'] = this.px(left);\n\n  var shadowStyle = parseInt(this.get('shadowStyle'), 10);\n\n  switch (shadowStyle) {\n    case 1:\n      // Shadow is behind\n      this.bubbleShadow_.style['top'] = this.px(top + tabHeight - 1);\n      this.bubbleShadow_.style['left'] = this.px(left);\n      this.bubbleShadow_.style['width'] = this.px(width);\n      this.bubbleShadow_.style['height'] =\n          this.px(this.contentContainer_.offsetHeight - arrowSize);\n      break;\n    case 2:\n      // Shadow is below\n      width = width * 0.8;\n      if (anchorHeight) {\n        this.bubbleShadow_.style['top'] = this.px(pos.y);\n      } else {\n        this.bubbleShadow_.style['top'] = this.px(pos.y + arrowSize);\n      }\n      this.bubbleShadow_.style['left'] = this.px(pos.x - width * arrowPosition);\n\n      this.bubbleShadow_.style['width'] = this.px(width);\n      this.bubbleShadow_.style['height'] = this.px(2);\n      break;\n  }\n};\nInfoBubble.prototype['draw'] = InfoBubble.prototype.draw;\n\n\n/**\n * Removing the InfoBubble from a map\n */\nInfoBubble.prototype.onRemove = function() {\n  if (this.bubble_ && this.bubble_.parentNode) {\n    this.bubble_.parentNode.removeChild(this.bubble_);\n  }\n  if (this.bubbleShadow_ && this.bubbleShadow_.parentNode) {\n    this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_);\n  }\n\n  for (var i = 0, listener; listener = this.listeners_[i]; i++) {\n    google.maps.event.removeListener(listener);\n  }\n};\nInfoBubble.prototype['onRemove'] = InfoBubble.prototype.onRemove;\n\n\n/**\n * Is the InfoBubble open\n *\n * @return {boolean} If the InfoBubble is open.\n */\nInfoBubble.prototype.isOpen = function() {\n  return this.isOpen_;\n};\nInfoBubble.prototype['isOpen'] = InfoBubble.prototype.isOpen;\n\n\n/**\n * Close the InfoBubble\n */\nInfoBubble.prototype.close = function() {\n  if (this.bubble_) {\n    this.bubble_.style['display'] = 'none';\n    // Remove the animation so we next time it opens it will animate again\n    this.bubble_.className =\n        this.bubble_.className.replace(this.animationName_, '');\n  }\n\n  if (this.bubbleShadow_) {\n    this.bubbleShadow_.style['display'] = 'none';\n    this.bubbleShadow_.className =\n        this.bubbleShadow_.className.replace(this.animationName_, '');\n  }\n  this.isOpen_ = false;\n};\nInfoBubble.prototype['close'] = InfoBubble.prototype.close;\n\n\n/**\n * Open the InfoBubble (asynchronous).\n *\n * @param {google.maps.Map=} opt_map Optional map to open on.\n * @param {google.maps.MVCObject=} opt_anchor Optional anchor to position at.\n */\nInfoBubble.prototype.open = function(opt_map, opt_anchor) {\n  var that = this;\n  window.setTimeout(function() {\n    that.open_(opt_map, opt_anchor);\n  }, 0);\n};\n\n/**\n * Open the InfoBubble\n * @private\n * @param {google.maps.Map=} opt_map Optional map to open on.\n * @param {google.maps.MVCObject=} opt_anchor Optional anchor to position at.\n */\nInfoBubble.prototype.open_ = function(opt_map, opt_anchor) {\n  this.updateContent_();\n\n  if (opt_map) {\n    this.setMap(opt_map);\n  }\n\n  if (opt_anchor) {\n    this.set('anchor', opt_anchor);\n    this.bindTo('anchorPoint', opt_anchor);\n    this.bindTo('position', opt_anchor);\n  }\n\n  // Show the bubble and the show\n  this.bubble_.style['display'] = this.bubbleShadow_.style['display'] = '';\n  var animation = !this.get('disableAnimation');\n\n  if (animation) {\n    // Add the animation\n    this.bubble_.className += ' ' + this.animationName_;\n    this.bubbleShadow_.className += ' ' + this.animationName_;\n  }\n\n  this.redraw_();\n  this.isOpen_ = true;\n\n  var pan = !this.get('disableAutoPan');\n  if (pan) {\n    var that = this;\n    window.setTimeout(function() {\n      // Pan into view, done in a time out to make it feel nicer :)\n      that.panToView();\n    }, 200);\n  }\n};\nInfoBubble.prototype['open'] = InfoBubble.prototype.open;\n\n\n/**\n * Set the position of the InfoBubble\n *\n * @param {google.maps.LatLng} position The position to set.\n */\nInfoBubble.prototype.setPosition = function(position) {\n  if (position) {\n    this.set('position', position);\n  }\n};\nInfoBubble.prototype['setPosition'] = InfoBubble.prototype.setPosition;\n\n\n/**\n * Returns the position of the InfoBubble\n *\n * @return {google.maps.LatLng} the position.\n */\nInfoBubble.prototype.getPosition = function() {\n  return /** @type {google.maps.LatLng} */ (this.get('position'));\n};\nInfoBubble.prototype['getPosition'] = InfoBubble.prototype.getPosition;\n\n\n/**\n * position changed MVC callback\n */\nInfoBubble.prototype.position_changed = function() {\n  this.draw();\n};\nInfoBubble.prototype['position_changed'] =\n    InfoBubble.prototype.position_changed;\n\n\n/**\n * Pan the InfoBubble into view\n */\nInfoBubble.prototype.panToView = function() {\n  var projection = this.getProjection();\n\n  if (!projection) {\n    // The map projection is not ready yet so do nothing\n    return;\n  }\n\n  if (!this.bubble_) {\n    // No Bubble yet so do nothing\n    return;\n  }\n\n  var anchorHeight = this.getAnchorHeight_();\n  var height = this.bubble_.offsetHeight + anchorHeight;\n  var map = this.get('map');\n  var mapDiv = map.getDiv();\n  var mapHeight = mapDiv.offsetHeight;\n\n  var latLng = this.getPosition();\n  var centerPos = projection.fromLatLngToContainerPixel(map.getCenter());\n  var pos = projection.fromLatLngToContainerPixel(latLng);\n\n  // Find out how much space at the top is free\n  var spaceTop = centerPos.y - height;\n\n  // Fine out how much space at the bottom is free\n  var spaceBottom = mapHeight - centerPos.y;\n\n  var needsTop = spaceTop < 0;\n  var deltaY = 0;\n\n  if (needsTop) {\n    spaceTop *= -1;\n    deltaY = (spaceTop + spaceBottom) / 2;\n  }\n\n  pos.y -= deltaY;\n  latLng = projection.fromContainerPixelToLatLng(pos);\n\n  if (map.getCenter() != latLng) {\n    map.panTo(latLng);\n  }\n};\nInfoBubble.prototype['panToView'] = InfoBubble.prototype.panToView;\n\n\n/**\n * Converts a HTML string to a document fragment.\n *\n * @param {string} htmlString The HTML string to convert.\n * @return {Node} A HTML document fragment.\n * @private\n */\nInfoBubble.prototype.htmlToDocumentFragment_ = function(htmlString) {\n  htmlString = htmlString.replace(/^\\s*([\\S\\s]*)\\b\\s*$/, '$1');\n  var tempDiv = document.createElement('DIV');\n  tempDiv.innerHTML = htmlString;\n  if (tempDiv.childNodes.length == 1) {\n    return /** @type {!Node} */ (tempDiv.removeChild(tempDiv.firstChild));\n  } else {\n    var fragment = document.createDocumentFragment();\n    while (tempDiv.firstChild) {\n      fragment.appendChild(tempDiv.firstChild);\n    }\n    return fragment;\n  }\n};\n\n\n/**\n * Removes all children from the node.\n *\n * @param {Node} node The node to remove all children from.\n * @private\n */\nInfoBubble.prototype.removeChildren_ = function(node) {\n  if (!node) {\n    return;\n  }\n\n  var child;\n  while (child = node.firstChild) {\n    node.removeChild(child);\n  }\n};\n\n\n/**\n * Sets the content of the infobubble.\n *\n * @param {string|Node} content The content to set.\n */\nInfoBubble.prototype.setContent = function(content) {\n  this.set('content', content);\n};\nInfoBubble.prototype['setContent'] = InfoBubble.prototype.setContent;\n\n\n/**\n * Get the content of the infobubble.\n *\n * @return {string|Node} The marker content.\n */\nInfoBubble.prototype.getContent = function() {\n  return /** @type {Node|string} */ (this.get('content'));\n};\nInfoBubble.prototype['getContent'] = InfoBubble.prototype.getContent;\n\n\n/**\n * Sets the marker content and adds loading events to images\n */\nInfoBubble.prototype.updateContent_ = function() {\n  if (!this.content_) {\n    // The Content area doesnt exist.\n    return;\n  }\n\n  this.removeChildren_(this.content_);\n  var content = this.getContent();\n  if (content) {\n    if (typeof content == 'string') {\n      content = this.htmlToDocumentFragment_(content);\n    }\n    this.content_.appendChild(content);\n\n    var that = this;\n    var images = this.content_.getElementsByTagName('IMG');\n    for (var i = 0, image; image = images[i]; i++) {\n      // Because we don't know the size of an image till it loads, add a\n      // listener to the image load so the marker can resize and reposition\n      // itself to be the correct height.\n      google.maps.event.addDomListener(image, 'load', function() {\n        that.imageLoaded_();\n      });\n    }\n    google.maps.event.trigger(this, 'domready');\n  }\n  this.redraw_();\n};\n\n/**\n * Image loaded\n * @private\n */\nInfoBubble.prototype.imageLoaded_ = function() {\n  var pan = !this.get('disableAutoPan');\n  this.redraw_();\n  if (pan && (this.tabs_.length == 0 || this.activeTab_.index == 0)) {\n    this.panToView();\n  }\n};\n\n/**\n * Updates the styles of the tabs\n * @private\n */\nInfoBubble.prototype.updateTabStyles_ = function() {\n  if (this.tabs_ && this.tabs_.length) {\n    for (var i = 0, tab; tab = this.tabs_[i]; i++) {\n      this.setTabStyle_(tab.tab);\n    }\n    this.activeTab_.style['zIndex'] = this.baseZIndex_;\n    var borderWidth = this.getBorderWidth_();\n    var padding = this.getPadding_() / 2;\n    this.activeTab_.style['borderBottomWidth'] = 0;\n    this.activeTab_.style['paddingBottom'] = this.px(padding + borderWidth);\n  }\n};\n\n\n/**\n * Sets the style of a tab\n * @private\n * @param {Element} tab The tab to style.\n */\nInfoBubble.prototype.setTabStyle_ = function(tab) {\n  var backgroundColor = this.get('backgroundColor');\n  var borderColor = this.get('borderColor');\n  var borderRadius = this.getBorderRadius_();\n  var borderWidth = this.getBorderWidth_();\n  var padding = this.getPadding_();\n\n  var marginRight = this.px(-(Math.max(padding, borderRadius)));\n  var borderRadiusPx = this.px(borderRadius);\n\n  var index = this.baseZIndex_;\n  if (tab.index) {\n    index -= tab.index;\n  }\n\n  // The styles for the tab\n  var styles = {\n    'cssFloat': 'left',\n    'position': 'relative',\n    'cursor': 'pointer',\n    'backgroundColor': backgroundColor,\n    'border': this.px(borderWidth) + ' solid ' + borderColor,\n    'padding': this.px(padding / 2) + ' ' + this.px(padding),\n    'marginRight': marginRight,\n    'whiteSpace': 'nowrap',\n    'borderRadiusTopLeft': borderRadiusPx,\n    'MozBorderRadiusTopleft': borderRadiusPx,\n    'webkitBorderTopLeftRadius': borderRadiusPx,\n    'borderRadiusTopRight': borderRadiusPx,\n    'MozBorderRadiusTopright': borderRadiusPx,\n    'webkitBorderTopRightRadius': borderRadiusPx,\n    'zIndex': index,\n    'display': 'inline'\n  };\n\n  for (var style in styles) {\n    tab.style[style] = styles[style];\n  }\n\n  var className = this.get('tabClassName');\n  if (className != undefined) {\n    tab.className += ' ' + className;\n  }\n};\n\n\n/**\n * Add user actions to a tab\n * @private\n * @param {Object} tab The tab to add the actions to.\n */\nInfoBubble.prototype.addTabActions_ = function(tab) {\n  var that = this;\n  tab.listener_ = google.maps.event.addDomListener(tab, 'click', function() {\n    that.setTabActive_(this);\n  });\n};\n\n\n/**\n * Set a tab at a index to be active\n *\n * @param {number} index The index of the tab.\n */\nInfoBubble.prototype.setTabActive = function(index) {\n  var tab = this.tabs_[index - 1];\n\n  if (tab) {\n    this.setTabActive_(tab.tab);\n  }\n};\nInfoBubble.prototype['setTabActive'] = InfoBubble.prototype.setTabActive;\n\n\n/**\n * Set a tab to be active\n * @private\n * @param {Object} tab The tab to set active.\n */\nInfoBubble.prototype.setTabActive_ = function(tab) {\n  if (!tab) {\n    this.setContent('');\n    this.updateContent_();\n    return;\n  }\n\n  var padding = this.getPadding_() / 2;\n  var borderWidth = this.getBorderWidth_();\n\n  if (this.activeTab_) {\n    var activeTab = this.activeTab_;\n    activeTab.style['zIndex'] = this.baseZIndex_ - activeTab.index;\n    activeTab.style['paddingBottom'] = this.px(padding);\n    activeTab.style['borderBottomWidth'] = this.px(borderWidth);\n  }\n\n  tab.style['zIndex'] = this.baseZIndex_;\n  tab.style['borderBottomWidth'] = 0;\n  tab.style['marginBottomWidth'] = '-10px';\n  tab.style['paddingBottom'] = this.px(padding + borderWidth);\n\n  this.setContent(this.tabs_[tab.index].content);\n  this.updateContent_();\n\n  this.activeTab_ = tab;\n\n  this.redraw_();\n};\n\n\n/**\n * Set the max width of the InfoBubble\n *\n * @param {number} width The max width.\n */\nInfoBubble.prototype.setMaxWidth = function(width) {\n  this.set('maxWidth', width);\n};\nInfoBubble.prototype['setMaxWidth'] = InfoBubble.prototype.setMaxWidth;\n\n\n/**\n * maxWidth changed MVC callback\n */\nInfoBubble.prototype.maxWidth_changed = function() {\n  this.redraw_();\n};\nInfoBubble.prototype['maxWidth_changed'] =\n    InfoBubble.prototype.maxWidth_changed;\n\n\n/**\n * Set the max height of the InfoBubble\n *\n * @param {number} height The max height.\n */\nInfoBubble.prototype.setMaxHeight = function(height) {\n  this.set('maxHeight', height);\n};\nInfoBubble.prototype['setMaxHeight'] = InfoBubble.prototype.setMaxHeight;\n\n\n/**\n * maxHeight changed MVC callback\n */\nInfoBubble.prototype.maxHeight_changed = function() {\n  this.redraw_();\n};\nInfoBubble.prototype['maxHeight_changed'] =\n    InfoBubble.prototype.maxHeight_changed;\n\n\n/**\n * Set the min width of the InfoBubble\n *\n * @param {number} width The min width.\n */\nInfoBubble.prototype.setMinWidth = function(width) {\n  this.set('minWidth', width);\n};\nInfoBubble.prototype['setMinWidth'] = InfoBubble.prototype.setMinWidth;\n\n\n/**\n * minWidth changed MVC callback\n */\nInfoBubble.prototype.minWidth_changed = function() {\n  this.redraw_();\n};\nInfoBubble.prototype['minWidth_changed'] =\n    InfoBubble.prototype.minWidth_changed;\n\n\n/**\n * Set the min height of the InfoBubble\n *\n * @param {number} height The min height.\n */\nInfoBubble.prototype.setMinHeight = function(height) {\n  this.set('minHeight', height);\n};\nInfoBubble.prototype['setMinHeight'] = InfoBubble.prototype.setMinHeight;\n\n\n/**\n * minHeight changed MVC callback\n */\nInfoBubble.prototype.minHeight_changed = function() {\n  this.redraw_();\n};\nInfoBubble.prototype['minHeight_changed'] =\n    InfoBubble.prototype.minHeight_changed;\n\n\n/**\n * Add a tab\n *\n * @param {string} label The label of the tab.\n * @param {string|Element} content The content of the tab.\n */\nInfoBubble.prototype.addTab = function(label, content) {\n  var tab = document.createElement('DIV');\n  tab.innerHTML = label;\n\n  this.setTabStyle_(tab);\n  this.addTabActions_(tab);\n\n  this.tabsContainer_.appendChild(tab);\n\n  this.tabs_.push({\n    label: label,\n    content: content,\n    tab: tab\n  });\n\n  tab.index = this.tabs_.length - 1;\n  tab.style['zIndex'] = this.baseZIndex_ - tab.index;\n\n  if (!this.activeTab_) {\n    this.setTabActive_(tab);\n  }\n\n  tab.className = tab.className + ' ' + this.animationName_;\n\n  this.redraw_();\n};\nInfoBubble.prototype['addTab'] = InfoBubble.prototype.addTab;\n\n/**\n * Update a tab at a speicifc index\n *\n * @param {number} index The index of the tab.\n * @param {?string} opt_label The label to change to.\n * @param {?string} opt_content The content to update to.\n */\nInfoBubble.prototype.updateTab = function(index, opt_label, opt_content) {\n  if (!this.tabs_.length || index < 0 || index >= this.tabs_.length) {\n    return;\n  }\n\n  var tab = this.tabs_[index];\n  if (opt_label != undefined) {\n    tab.tab.innerHTML = tab.label = opt_label;\n  }\n\n  if (opt_content != undefined) {\n    tab.content = opt_content;\n  }\n\n  if (this.activeTab_ == tab.tab) {\n    this.setContent(tab.content);\n    this.updateContent_();\n  }\n  this.redraw_();\n};\nInfoBubble.prototype['updateTab'] = InfoBubble.prototype.updateTab;\n\n\n/**\n * Remove a tab at a specific index\n *\n * @param {number} index The index of the tab to remove.\n */\nInfoBubble.prototype.removeTab = function(index) {\n  if (!this.tabs_.length || index < 0 || index >= this.tabs_.length) {\n    return;\n  }\n\n  var tab = this.tabs_[index];\n  tab.tab.parentNode.removeChild(tab.tab);\n\n  google.maps.event.removeListener(tab.tab.listener_);\n\n  this.tabs_.splice(index, 1);\n\n  delete tab;\n\n  for (var i = 0, t; t = this.tabs_[i]; i++) {\n    t.tab.index = i;\n  }\n\n  if (tab.tab == this.activeTab_) {\n    // Removing the current active tab\n    if (this.tabs_[index]) {\n      // Show the tab to the right\n      this.activeTab_ = this.tabs_[index].tab;\n    } else if (this.tabs_[index - 1]) {\n      // Show a tab to the left\n      this.activeTab_ = this.tabs_[index - 1].tab;\n    } else {\n      // No tabs left to sho\n      this.activeTab_ = undefined;\n    }\n\n    this.setTabActive_(this.activeTab_);\n  }\n\n  this.redraw_();\n};\nInfoBubble.prototype['removeTab'] = InfoBubble.prototype.removeTab;\n\n\n/**\n * Get the size of an element\n * @private\n * @param {Node|string} element The element to size.\n * @param {number=} opt_maxWidth Optional max width of the element.\n * @param {number=} opt_maxHeight Optional max height of the element.\n * @return {google.maps.Size} The size of the element.\n */\nInfoBubble.prototype.getElementSize_ = function(element, opt_maxWidth,\n                                                opt_maxHeight) {\n  var sizer = document.createElement('DIV');\n  sizer.style['display'] = 'inline';\n  sizer.style['position'] = 'absolute';\n  sizer.style['visibility'] = 'hidden';\n\n  if (typeof element == 'string') {\n    sizer.innerHTML = element;\n  } else {\n    sizer.appendChild(element.cloneNode(true));\n  }\n\n  document.body.appendChild(sizer);\n  var size = new google.maps.Size(sizer.offsetWidth, sizer.offsetHeight);\n\n  // If the width is bigger than the max width then set the width and size again\n  if (opt_maxWidth && size.width > opt_maxWidth) {\n    sizer.style['width'] = this.px(opt_maxWidth);\n    size = new google.maps.Size(sizer.offsetWidth, sizer.offsetHeight);\n  }\n\n  // If the height is bigger than the max height then set the height and size\n  // again\n  if (opt_maxHeight && size.height > opt_maxHeight) {\n    sizer.style['height'] = this.px(opt_maxHeight);\n    size = new google.maps.Size(sizer.offsetWidth, sizer.offsetHeight);\n  }\n\n  document.body.removeChild(sizer);\n  delete sizer;\n  return size;\n};\n\n\n/**\n * Redraw the InfoBubble\n * @private\n */\nInfoBubble.prototype.redraw_ = function() {\n  this.figureOutSize_();\n  this.positionCloseButton_();\n  this.draw();\n};\n\n\n/**\n * Figure out the optimum size of the InfoBubble\n * @private\n */\nInfoBubble.prototype.figureOutSize_ = function() {\n  var map = this.get('map');\n\n  if (!map) {\n    return;\n  }\n\n  var padding = this.getPadding_();\n  var borderWidth = this.getBorderWidth_();\n  var borderRadius = this.getBorderRadius_();\n  var arrowSize = this.getArrowSize_();\n\n  var mapDiv = map.getDiv();\n  var gutter = arrowSize * 2;\n  var mapWidth = mapDiv.offsetWidth - gutter;\n  var mapHeight = mapDiv.offsetHeight - gutter - this.getAnchorHeight_();\n  var tabHeight = 0;\n  var width = /** @type {number} */ (this.get('minWidth') || 0);\n  var height = /** @type {number} */ (this.get('minHeight') || 0);\n  var maxWidth = /** @type {number} */ (this.get('maxWidth') || 0);\n  var maxHeight = /** @type {number} */ (this.get('maxHeight') || 0);\n\n  maxWidth = Math.min(mapWidth, maxWidth);\n  maxHeight = Math.min(mapHeight, maxHeight);\n\n  var tabWidth = 0;\n  if (this.tabs_.length) {\n    // If there are tabs then you need to check the size of each tab's content\n    for (var i = 0, tab; tab = this.tabs_[i]; i++) {\n      var tabSize = this.getElementSize_(tab.tab, maxWidth, maxHeight);\n      var contentSize = this.getElementSize_(tab.content, maxWidth, maxHeight);\n\n      if (width < tabSize.width) {\n        width = tabSize.width;\n      }\n\n      // Add up all the tab widths because they might end up being wider than\n      // the content\n      tabWidth += tabSize.width;\n\n      if (height < tabSize.height) {\n        height = tabSize.height;\n      }\n\n      if (tabSize.height > tabHeight) {\n        tabHeight = tabSize.height;\n      }\n\n      if (width < contentSize.width) {\n        width = contentSize.width;\n      }\n\n      if (height < contentSize.height) {\n        height = contentSize.height;\n      }\n    }\n  } else {\n    var content = /** @type {string|Node} */ (this.get('content'));\n    if (typeof content == 'string') {\n      content = this.htmlToDocumentFragment_(content);\n    }\n    if (content) {\n      var contentSize = this.getElementSize_(content, maxWidth, maxHeight);\n\n      if (width < contentSize.width) {\n        width = contentSize.width;\n      }\n\n      if (height < contentSize.height) {\n        height = contentSize.height;\n      }\n    }\n  }\n\n  if (maxWidth) {\n    width = Math.min(width, maxWidth);\n  }\n\n  if (maxHeight) {\n    height = Math.min(height, maxHeight);\n  }\n\n  width = Math.max(width, tabWidth);\n\n  if (width == tabWidth) {\n    width = width + 2 * padding;\n  }\n\n  arrowSize = arrowSize * 2;\n  width = Math.max(width, arrowSize);\n\n  // Maybe add this as a option so they can go bigger than the map if the user\n  // wants\n  if (width > mapWidth) {\n    width = mapWidth;\n  }\n\n  if (height > mapHeight) {\n    height = mapHeight - tabHeight;\n  }\n\n  if (this.tabsContainer_) {\n    this.tabHeight_ = tabHeight;\n    this.tabsContainer_.style['width'] = this.px(tabWidth);\n  }\n\n  this.contentContainer_.style['width'] = this.px(width);\n  this.contentContainer_.style['height'] = this.px(height);\n};\n\n\n/**\n *  Get the height of the anchor\n *\n *  This function is a hack for now and doesn't really work that good, need to\n *  wait for pixelBounds to be correctly exposed.\n *  @private\n *  @return {number} The height of the anchor.\n */\nInfoBubble.prototype.getAnchorHeight_ = function() {\n  var anchor = this.get('anchor');\n  if (anchor) {\n    var anchorPoint = /** @type google.maps.Point */(this.get('anchorPoint'));\n\n    if (anchorPoint) {\n      return -1 * anchorPoint.y;\n    }\n  }\n  return 0;\n};\n\nInfoBubble.prototype.anchorPoint_changed = function() {\n  this.draw();\n};\nInfoBubble.prototype['anchorPoint_changed'] = InfoBubble.prototype.anchorPoint_changed;\n\n\n/**\n * Position the close button in the right spot.\n * @private\n */\nInfoBubble.prototype.positionCloseButton_ = function() {\n  var br = this.getBorderRadius_();\n  var bw = this.getBorderWidth_();\n\n  var right = 2;\n  var top = 2;\n\n  if (this.tabs_.length && this.tabHeight_) {\n    top += this.tabHeight_;\n  }\n\n  top += bw;\n  right += bw;\n\n  var c = this.contentContainer_;\n  if (c && c.clientHeight < c.scrollHeight) {\n    // If there are scrollbars then move the cross in so it is not over\n    // scrollbar\n    right += 15;\n  }\n\n  this.close_.style['right'] = this.px(right);\n  this.close_.style['top'] = this.px(top);\n};\n"]}